var $ = window.$;
var sprite_width = 16;
var cv_width = 100;
function printFont(char){
    var cv = $("<canvas>").attr({
        width: cv_width,
        height: cv_width
    }).get(0);
    var ctx = cv.getContext('2d');
    ctx.fillStyle = "white";
    ctx.font = "bold 14px 'ＭＳ 明朝'";
    //ctx.font = size + "px '游明朝'";
    ctx.fillText(char, cv_width/2, cv_width/2);
    //---------------------------------------------------------
    var imgData = ctx.getImageData(0,0,cv_width,cv_width);
    var d = imgData.data;
    var cv2 = $("<canvas>").attr({
        width: cv_width,
        height: cv_width
    }).get(0);
    var ctx2 = cv2.getContext('2d');
    ctx2.fillStyle = "white";
    for(let y = 0; y < cv_width; y++){
        for(let x = 0; x < cv_width; x++){
            if(d[4*(y * cv_width + x)+3] < 150) continue;
            ctx2.fillRect(x, y, 1, 1);
        }
    }
    //---------------------------------------------------------
    var imgData2 = ctx.getImageData(0,0,cv_width,cv_width);
    var d2 = imgData2.data;
    let startX = cv_width,
        startY = cv_width;
    for(let y = 0; y < cv_width; y++){
        for(let x = 0; x < cv_width; x++){
            if(!d2[4*(y * cv_width + x)+3]) continue;
            if(x < startX) startX = x;
            if(y < startY) startY = y;
        }
    }
    var cv3 = $("<canvas>").attr({
        width: sprite_width,
        height: sprite_width
    }).get(0);
    var ctx3 = cv3.getContext('2d');
    ctx3.drawImage(cv2, startX, startY, sprite_width, sprite_width, 0, 1, sprite_width, sprite_width);
    return cv3;
}
function makeFont(char){
    var cv = printFont(char);
    var ctx = cv.getContext('2d');
    var imgData = ctx.getImageData(0,0,sprite_width,sprite_width);
    var d = imgData.data;
    var fillList = [];
    for(let i = 0; i < d.length; i+=4){
        if(d[i+3]) continue;
        var x = (i / 4) % sprite_width,
            y = Math.floor((i / 4) / sprite_width);
        const ar = [
            [x-1,y-1],
            [x,y-1],
            [x+1,y-1],
            [x-1,y],
            [x+1,y],
            [x-1,y+1],
            [x,y+1],
            [x+1,y+1],
        ].filter(v => {
            var x = v[0],
                y = v[1];
            return 0 <= x && x < sprite_width && 0 <= y && y < sprite_width;
        }).filter(v => {
            var x = v[0],
                y = v[1];
            return d[ 4 * ( y * sprite_width + x ) + 3];
        });
        if(!ar.length) continue;
        fillList.push([x,y]);
    }
    ctx.fillStyle = "rgba(32,36,48,1.0)";
    fillList.forEach(xy=>{
        ctx.fillRect(xy[0], xy[1], 1, 1);
    });
    return cv.toDataURL();
}
function post(char){
    $.post("http://rpgen.us/dq/sprites/cons/upload.php",{
        token: "5c73201fcaa38487acbce4ad89ccfe837c154f31",
        imgBase: makeFont(char),
        title: char,
        pass: "1q1q"
    });
}
var kanjiList = "亜哀挨曖握扱宛嵐依威為畏尉萎偉椅彙違維慰緯壱逸芋咽姻淫陰隠韻唄鬱畝浦詠影鋭疫悦越謁閲炎怨宴援煙猿鉛縁艶汚凹押旺欧殴翁奥憶臆虞乙俺卸穏佳苛架華菓渦嫁暇禍靴寡箇稼蚊牙瓦雅餓介戒怪拐悔皆塊楷潰壊懐諧劾崖涯慨蓋該概骸垣柿核殻郭較隔獲嚇穫岳顎掛括喝渇葛滑褐轄且釜鎌刈甘汗缶肝冠陥乾勘患貫喚堪換敢棺款閑勧寛歓監緩憾還環韓艦鑑含玩頑企伎忌奇祈軌既飢鬼亀幾棋棄毀畿輝騎宜偽欺儀戯擬犠菊吉喫詰却脚虐及丘朽臼糾嗅窮巨拒拠虚距御凶叫狂享況峡挟狭恐恭脅矯響驚仰暁凝巾斤菌琴僅緊錦謹襟吟駆惧愚偶遇隅串屈掘窟繰勲薫刑茎契恵啓掲渓蛍傾携継詣慶憬稽憩鶏迎鯨隙撃桁傑肩倹兼剣拳軒圏堅嫌献遣賢謙鍵繭顕懸幻玄弦舷股虎孤弧枯雇誇鼓錮顧互呉娯悟碁勾孔巧甲江坑抗攻更拘肯侯恒洪荒郊貢控梗喉慌硬絞項溝綱酵稿衡購乞拷剛傲豪克酷獄駒込頃昆恨婚痕紺魂墾懇沙唆詐鎖挫采砕宰栽彩斎債催塞歳載剤削柵索酢搾錯咲刹拶撮擦桟惨傘斬暫旨伺刺祉肢施恣脂紫嗣雌摯賜諮侍慈餌璽軸疾執湿嫉漆芝赦斜煮遮邪蛇酌釈爵寂朱狩殊珠腫趣寿呪需儒囚舟秀臭袖羞愁酬醜蹴襲汁充柔渋銃獣叔淑粛塾俊瞬旬巡盾准殉循潤遵庶緒如叙徐升召匠床抄肖尚昇沼宵症祥称渉紹訟掌晶焦硝粧詔奨詳彰憧衝償礁鐘丈冗浄剰畳壌嬢錠譲醸拭殖飾触嘱辱尻伸芯辛侵津唇娠振浸紳診寝慎審震薪刃尽迅甚陣尋腎須吹炊帥粋衰酔遂睡穂随髄枢崇据杉裾瀬是姓征斉牲凄逝婿誓請醒斥析脊隻惜戚跡籍拙窃摂仙占扇栓旋煎羨腺詮践箋潜遷薦繊鮮禅漸膳繕狙阻租措粗疎訴塑遡礎双壮荘捜挿桑掃曹曽爽喪痩葬僧遭槽踪燥霜騒藻憎贈即促捉俗賊遜汰妥唾堕惰駄耐怠胎泰堆袋逮替滞戴滝択沢卓拓託濯諾濁但脱奪棚誰丹旦胆淡嘆端綻鍛弾壇恥致遅痴稚緻畜逐蓄秩窒嫡抽衷酎鋳駐弔挑彫眺釣貼超跳徴嘲澄聴懲勅捗沈珍朕陳鎮椎墜塚漬坪爪鶴呈廷抵邸亭貞帝訂逓偵堤艇締諦泥摘滴溺迭哲徹撤添塡殿斗吐妬途渡塗賭奴怒到逃倒凍唐桃透悼盗陶塔搭棟痘筒稲踏謄藤闘騰洞胴瞳峠匿督篤凸突屯豚頓貪鈍曇丼那謎鍋軟尼弐匂虹尿妊忍寧捻粘悩濃把覇婆罵杯排廃輩培陪媒賠伯拍泊迫剝舶薄漠縛爆箸肌鉢髪伐抜罰閥氾帆汎伴畔般販斑搬煩頒範繁藩蛮盤妃彼披卑疲被扉碑罷避尾眉微膝肘匹泌姫漂苗描猫浜賓頻敏瓶扶怖附訃赴浮符普腐敷膚賦譜侮舞封伏幅覆払沸紛雰噴墳憤丙併柄塀幣弊蔽餅壁璧癖蔑偏遍哺捕舗募慕簿芳邦奉抱泡胞俸倣峰砲崩蜂飽褒縫乏忙坊妨房肪某冒剖紡傍帽貌膨謀頰朴睦僕墨撲没勃堀奔翻凡盆麻摩磨魔昧埋膜枕又抹慢漫魅岬蜜妙眠矛霧娘冥銘滅免麺茂妄盲耗猛網黙紋冶弥厄躍闇喩愉諭癒唯幽悠湧猶裕雄誘憂融与誉妖庸揚揺溶腰瘍踊窯擁謡抑沃翼拉裸羅雷頼絡酪辣濫藍欄吏痢履璃離慄柳竜粒隆硫侶虜慮了涼猟陵僚寮療瞭糧厘倫隣瑠涙累塁励戻鈴零霊隷齢麗暦劣烈裂恋廉錬呂炉賂露弄郎浪廊楼漏籠麓賄脇惑枠湾腕茨媛岡潟岐熊香佐埼崎滋鹿縄井沖栃奈梨阪阜".split('');
kanjiList.push("𠮟");
let i = 0;
function main(){
    if(!kanjiList[i]) return;
    post(kanjiList[i]);
}
setInterval(main,10*1000);
